var h=class{events={};on(e,t){typeof this.events[e]!="object"&&(this.events[e]=[]),this.events[e].push(t);let s=this,i=function(){s.removeListener(e,t)};return this.events[e].length==1&&this.emit("#has-listeners",e,t),i}removeListener(e,t){var s;typeof this.events[e]=="object"&&(s=this.events[e].indexOf(t),s>-1&&(this.events[e].splice(s,1),this.events[e].length==0&&this.emit("#no-listeners",e,t)))}emit(e){if(typeof this.events[e]=="object"){var t,s,i,r=[].slice.call(arguments,1);for(s=this.events[e].slice(),i=s.length,t=0;t<i;t++)try{s[t].apply(this,r)}catch(n){console.error(e,r),console.error(n)}}}once(e,t){return this.on(e,function s(){this.removeListener(e,s),t.apply(this,arguments)})}waitForEvent(e,t=0){return new Promise(s=>{let i,r=this.on(e,()=>{t>0&&clearTimeout(i),r(),s(!0)});t>0&&(i=setTimeout(()=>{r(),s(!1)},t))})}waitForAnyEvent(e,t=0){return new Promise(s=>{let i,r=[],n=()=>{t>0&&clearTimeout(i),r.forEach(o=>{o()}),s(!0)};e.forEach(o=>{r.push(this.on(o,n))}),t>0&&(i=setTimeout(()=>{n(),s(!1)},t))})}clear(){this.events={}}clearEventListeners(e){this.events[e]=[]}onHasEventListeners(e){return this.on("#has-listeners",e)}onNoEventListeners(e){return this.on("#no-listeners",e)}};export{h as EventEmitter};
