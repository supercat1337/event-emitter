var u=class{events={};on(e,t){typeof this.events[e]!="object"&&(this.events[e]=[]),this.events[e].push(t);let s=this;return function(){s.removeListener(e,t)}}removeListener(e,t){var s;typeof this.events[e]=="object"&&(s=this.events[e].indexOf(t),s>-1&&this.events[e].splice(s,1))}emit(e){if(typeof this.events[e]=="object"){var t,s,r,i=[].slice.call(arguments,1);for(s=this.events[e].slice(),r=s.length,t=0;t<r;t++)try{s[t].apply(this,i)}catch(n){console.error(e,i),console.error(n)}}}once(e,t){return this.on(e,function s(){this.removeListener(e,s),t.apply(this,arguments)})}waitForEvent(e,t=0){return new Promise(s=>{let r,i=this.on(e,()=>{t>0&&clearTimeout(r),i(),s(!0)});t>0&&(r=setTimeout(()=>{i(),s(!1)},t))})}waitForAnyEvent(e,t=0){return new Promise(s=>{let r,i=[],n=()=>{t>0&&clearTimeout(r),i.forEach(o=>{o()}),s(!0)};e.forEach(o=>{i.push(this.on(o,n))}),t>0&&(r=setTimeout(()=>{n(),s(!1)},t))})}};export{u as EventEmitter};
